{#####  cTools_common  #####}
<!DOCTYPE html>
{##
EXAMPLES OF GETTING STATIC FILES
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo">
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
##}

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <!-- Bootstrap JS bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <script src="{{ url_for('static', filename='js/calvinprocs.js') }}"></script>
    {# <link rel="icon" type="image/x-icon" href="{% static 'WICS-favicon.png' %}"> do block/tag for app icon #}
    <title>{% block tTitle %}{% endblock %}</title>
    {% block tHeader %}
	<style>
        {##
         include "proposed-table-CSS.css" 
        ##}
        {% block customCSS %}{% endblock %}
    </style>
	{% endblock %}
</head>
<body {% block boddyAttr %}{% endblock %}>
<div class="container text-center mx-auto {% block Header_div_attr %}{% endblock %}">
    {% block Hdr_LogoFormNameUserName %}
    <div class="row">   <!-- WICS Logo, FormName and username -->
		<div class="col-6 fs-3 text-center">{% block formName %}{% endblock %}</div>
        <div class="col-4 fs-2 text-start">{# <img src={% static 'WICS-Logo.png' %} width="150" height="75"> #}</div>
        <div class="col-2 text-end"> {{ user.get_full_name }} </div>
    </div>
    {% endblock %}
    <div class="row"> <!-- status messages -->
        <div id="wait_spinner" class="container" style="display:none">
			<div class="spinner-border text-success">
			</div>
			{% block wait_spinner_msgs %}
			{% endblock %}
		</div>
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
		{% block statusMsgs %}<!-- extra status messages should be div's -->{% endblock %}
    </div> <!-- row -->
</div> <!-- container -->

{% block boddy %}
{% endblock %}

<dialog id="areYouSureDialog" class="p-4 rounded border-0 shadow">
    <div class="dialog-content">
        <h5 id="dialogTitle" class="mb-3"></h5>
        <p id="dialogQuestion" class="mb-4"></p>
        <div class="d-flex justify-content-end gap-2">
            <button id="dialogNoBtn" class="btn btn-secondary" value="no">No</button>
            <button id="dialogYesBtn" class="btn btn-primary" value="yes">Yes</button>
        </div>
    </div>
</dialog>

<script>
/**
 * Display a confirmation dialog and return the user's choice via a Promise.
 * 
 * @param {string} title - Title of the dialog box.
 * @param {string} areYouSureQuestion - Question to ask the user.
 * @param {Object} options - Optional configuration.
 * @param {boolean} options.showYes - Show Yes button (default: true).
 * @param {boolean} options.showNo - Show No button (default: true).
 * @param {string} options.defaultButton - Default button: 'yes' or 'no' (default: 'no').
 * @param {string} options.yesText - Text for Yes button (default: 'Yes').
 * @param {string} options.noText - Text for No button (default: 'No').
 * @returns {Promise<string>} Promise that resolves to 'yes' or 'no' based on user's choice.
 */
function areYouSure(title, areYouSureQuestion, options = {}) {
    const defaults = {
        showYes: true,
        showNo: true,
        defaultButton: 'no',
        yesText: 'Yes',
        noText: 'No'
    };
    const config = { ...defaults, ...options };
    
    return new Promise((resolve) => {
        const dialog = document.getElementById('areYouSureDialog');
        const dialogTitle = document.getElementById('dialogTitle');
        const dialogQuestion = document.getElementById('dialogQuestion');
        const yesBtn = document.getElementById('dialogYesBtn');
        const noBtn = document.getElementById('dialogNoBtn');
        
        // Set content
        dialogTitle.textContent = title;
        dialogQuestion.textContent = areYouSureQuestion;
        
        // Configure buttons
        yesBtn.textContent = config.yesText;
        noBtn.textContent = config.noText;
        yesBtn.style.display = config.showYes ? 'block' : 'none';
        noBtn.style.display = config.showNo ? 'block' : 'none';
        
        // Set default button focus
        if (config.defaultButton === 'yes' && config.showYes) {
            yesBtn.focus();
        } else if (config.showNo) {
            noBtn.focus();
        }
        
        // Handle button clicks
        const handleClick = (result) => {
            dialog.close();
            resolve(result);
            yesBtn.removeEventListener('click', yesHandler);
            noBtn.removeEventListener('click', noHandler);
        };
        
        const yesHandler = () => handleClick('yes');
        const noHandler = () => handleClick('no');
        
        yesBtn.addEventListener('click', yesHandler);
        noBtn.addEventListener('click', noHandler);
        
        // Show dialog
        dialog.showModal();
    });
}
</script>
</body>
</html>
